{
    "statements": [
      {
        "query": "MATCH (n:GCPFunction) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Delete GCP Cloud Functions that no longer exist and detach them from all previously connected nodes."
      },
      {
        "query": "MATCH (:GCPFunction)<-[r:RESOURCE]-(:GCPProject) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Remove GCP GCPFunction-to-Project relationships that are out of date."
      },
      {
        "query": "MATCH (n:policies) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Delete GCP Cloud Function Policies that no longer exist and detach them from all previously connected nodes."
      },
      {
        "query": "MATCH (:policies)<-[r:HAS_POLICY]-(:GCPFunction) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Remove GCP policy-to-GCPFunction relationships that are out of date."
      },
      {
        "query": "MATCH (n:GCPSubscription) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Delete GCP Cloud Function Subscriptions that no longer exist and detach them from all previously connected nodes."
      },
      {
        "query": "MATCH (:GCPSubscription)<-[r:HAS_SUBSCRIPTIONS]-(:GCPFunction) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
        "iterative": true,
        "iterationsize": 100,
        "__comment__": "Remove GCPSubscription-to-GCPFunction relationships that are out of date."
      }
    ],
    "name": "Cleanup GCP DNS Records and RecordSets"
  }
  