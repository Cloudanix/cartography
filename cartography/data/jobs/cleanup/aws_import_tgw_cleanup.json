{
  "statements": [
  {
    "query": "MATCH (:AWSTransitGateway)<-[r:RESOURCE|SHARED_WITH]-(:AWSAccount{id: {AWS_ID}})<-[:OWNER]-(:CloudanixWorkspace{id: {WORKSPACE_ID}}) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:AWSTransitGatewayAttachment)<-[r:RESOURCE|SHARED_WITH]-(:AWSAccount{id: {AWS_ID}})<-[:OWNER]-(:CloudanixWorkspace{id: {WORKSPACE_ID}}) WHERE r.lastupdated <> {UPDATE_TAG} WITH r LIMIT {LIMIT_SIZE} DELETE (r) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (n:AWSTransitGateway)<-[:RESOURCE|SHARED_WITH]-(:AWSAccount{id: {AWS_ID}})<-[:OWNER]-(:CloudanixWorkspace{id: {WORKSPACE_ID}}) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (n:AWSTransitGatewayAttachment)<-[:RESOURCE|SHARED_WITH]-(:AWSAccount{id: {AWS_ID}})<-[:OWNER]-(:CloudanixWorkspace{id: {WORKSPACE_ID}}) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  }],
  "name": "cleanup AWS Transit Gateway information"
}
